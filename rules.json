{
  "htmlPreprocessors": [
    {
      "description": "Unwrap <mark> annotation tags",
      "pattern": "<mark[^>]*>([\\s\\S]*?)<\\/mark>",
      "replacement": "$1",
      "flags": "gi"
    },
    {
      "description": "Remove Confluence heading anchor buttons",
      "pattern": "<span[^>]*class=\"heading-anchor-wrapper\"[\\s\\S]*?<\\/span>",
      "replacement": "",
      "flags": "gi"
    },
    {
      "description": "Strip table colgroup definitions",
      "pattern": "<colgroup[\\s\\S]*?<\\/colgroup>",
      "replacement": "",
      "flags": "gi"
    },
    {
      "description": "Remove Confluence table sorting icons",
      "pattern": "<figure[^>]*class=\"ak-renderer-tableHeader-sorting-icon__wrapper\"[\\s\\S]*?<\\/figure>",
      "replacement": "",
      "flags": "gi"
    },
    {
      "description": "Extract status lozenge with colour + text",
      "pattern": "<span[^>]*class=\\\"status-lozenge-span[^>]*data-color=\\\"([^\\\"]+)\\\"[^>]*>[\\s\\S]*?<span[^>]*>([^<]+)<\\/span>[\\s\\S]*?<\\/span>",
      "replacement": "%%STATUS-$1-$2-STATUS%%",
      "flags": "gi"
    },
    {
      "description": "Extract inline status node (editor) with colour + text",
      "pattern": "<span[^>]*data-node-type=\\\"status\\\"[^>]*data-color=\\\"([^\\\"]+)\\\"[^>]*>([^<]+)<\\/span>",
      "replacement": "%%STATUS-$1-$2-STATUS%%",
      "flags": "gi"
    },
    {
      "description": "Convert inline code spans to <code> tags",
      "pattern": "<span[^>]*(?:class=\\\"[^\\\"]*\\bcode\\b[^\\\"]*\\\"|data-prosemirror-mark-name=\\\"code\\\")[^>]*>([\\s\\S]*?)<\\/span>",
      "replacement": "<code>$1</code>",
      "flags": "gi"
    },
    {
      "description": "Normalize Confluence code block markup to plain <pre><code>",
      "pattern": "<pre[^>]*class=\\\"[^\\\"]*\\bcode-block\\b[^\\\"]*\\\"[^>]*>[\\s\\S]*?<code[^>]*data-language=\\\"([^\\\"]*)\\\"[^>]*>([\\s\\S]*?)<\\/code>[\\s\\S]*?<\\/pre>",
      "replacement": "<pre><code class=\\\"language-$1\\\">$2</code></pre>",
      "flags": "gim"
    }
  ],
  "markdownPostprocessors": [
    {
      "description": "Fix '# - ' heading-list hybrids",
      "pattern": "^# - ",
      "replacement": "- ",
      "flags": "gm"
    },
    {
      "description": "Split combined heading + table header row (e.g. '# Title | ...')",
      "pattern": "^# ([^|\\n]+)\\s*\\|\\s*(.+)$",
      "replacement": "# $1\n\n| $2",
      "flags": "gm"
    },
    {
      "description": "Blue lozenge â†’ ðŸ”µ",
      "pattern": "%%STATUS-blue-([^%]+)-STATUS%%",
      "replacement": "(ðŸ”µ $1)",
      "flags": "gi"
    },
    {
      "description": "Green lozenge â†’ ðŸŸ¢",
      "pattern": "%%STATUS-green-([^%]+)-STATUS%%",
      "replacement": "(ðŸŸ¢ $1)",
      "flags": "gi"
    },
    {
      "description": "Yellow lozenge â†’ ðŸŸ¡",
      "pattern": "%%STATUS-yellow-([^%]+)-STATUS%%",
      "replacement": "(ðŸŸ¡ $1)",
      "flags": "gi"
    },
    {
      "description": "Red lozenge â†’ ðŸ”´",
      "pattern": "%%STATUS-red-([^%]+)-STATUS%%",
      "replacement": "(ðŸ”´ $1)",
      "flags": "gi"
    },
    {
      "description": "Grey lozenge â†’ âšª",
      "pattern": "%%STATUS-grey-([^%]+)-STATUS%%",
      "replacement": "(âšª $1)",
      "flags": "gi"
    },
    {
      "description": "Purple lozenge â†’ ðŸŸ£",
      "pattern": "%%STATUS-purple-([^%]+)-STATUS%%",
      "replacement": "(ðŸŸ£ $1)",
      "flags": "gi"
    },
    {
      "description": "Brown lozenge â†’ ðŸŸ¤",
      "pattern": "%%STATUS-brown-([^%]+)-STATUS%%",
      "replacement": "(ðŸŸ¤ $1)",
      "flags": "gi"
    },
    {
      "description": "Convert STATUS placeholders to default emoji lozenge",
      "pattern": "%%STATUS-([^-]+)-([^%]+)-STATUS%%",
      "replacement": "(ðŸ”˜ $2)",
      "flags": "gi"
    }
  ]
}
