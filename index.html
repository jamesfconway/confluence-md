<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Confluence → Markdown Converter</title>
  <link rel="stylesheet" href="styles.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
  />
  <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
  <script src="https://unpkg.com/turndown-plugin-gfm/dist/turndown-plugin-gfm.js"></script>
  <script src="converter/rules/loader.js"></script>
  <script src="converter/plugins/imagePlaceholder.js"></script>
  <script src="converter/plugins/expandBlock.js"></script>
  <script src="converter/plugins/panel.js"></script>
  <script src="converter/plugins/mentionPlaceholder.js"></script>
  <script src="converter/plugins/confluenceTable.js"></script>
  <script src="converter/plugins/extensionFallback.js"></script>
  <script src="converter/plugins/pluginLoader.js"></script>
  <script src="converter/pipeline/stages.js"></script>
  <script src="converter.js"></script>
  <script src="https://unpkg.com/prettier@2.8.8/standalone.js"></script>
  <script src="https://unpkg.com/prettier@2.8.8/parser-html.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
  <header>
    <div class="title">
      <h1>Confluence → Markdown Converter</h1>
    </div>
  </header>

  <main>
    <section class="panel active" id="panel-convert">
      <div class="panel-grid">
        <div class="card card-accent">
          <div class="card-header">
            <div>
              <p class="eyebrow">Context menu ready</p>
              <h2>Paste or ingest Confluence snippets</h2>
            </div>
            <div class="actions">
              <button class="primary" id="pasteFromClipboard">Paste from clipboard</button>
              <button class="primary" id="copyMarkdown">Copy Markdown</button>
              <button class="secondary" id="clearPaste">Clear</button>
            </div>
          </div>
          <div class="status-row">
            <span id="status">Waiting for content…</span>
          </div>

          <div class="accordion">
            <details id="section-copied" class="fold">
              <summary>
                <div class="summary-content">
                  <span class="summary-title">Copied content</span>
                  <span class="summary-hint">Rendered preview (default collapsed)</span>
                </div>
              </summary>
              <div class="fold-body">
                <small class="muted"
                  >Click and paste here, or use the right-click menu to prefill your clipboard.</small
                >
                <div id="pasteArea" contenteditable="true" aria-label="Confluence HTML preview"></div>
              </div>
            </details>

            <details id="section-html" class="fold">
              <summary>
                <div class="summary-content">
                  <span class="summary-title">Raw HTML</span>
                  <span class="summary-hint">Debug view</span>
                </div>
              </summary>
              <div class="fold-body">
                <div class="code-panel">
                  <div class="code-panel__header">
                    <span class="muted">Formatted &amp; highlighted</span>
                    <button class="secondary compact" id="copyHtml">Copy HTML</button>
                  </div>
                  <pre class="code-panel__body"><code id="htmlHighlight" class="language-html"></code></pre>
                </div>
                <textarea id="htmlView" spellcheck="false" aria-label="Raw HTML (formatted)"></textarea>
              </div>
            </details>

            <details id="section-markdown" class="fold" open>
              <summary>
                <div class="summary-content">
                  <span class="summary-title">Markdown output</span>
                  <span class="summary-hint">Default open</span>
                </div>
              </summary>
              <div class="fold-body">
                <textarea id="markdownView" spellcheck="false"></textarea>
                <div
                  id="markdownFeedback"
                  class="inline-feedback"
                  role="status"
                  aria-live="polite"
                  aria-atomic="true"
                ></div>
                <div class="controls">
                  <div class="option-group">
                    <label>
                      <input type="checkbox" id="includeLinks" checked />
                      Include links
                    </label>
                    <label>
                      <input type="checkbox" id="includeImagePlaceholders" checked />
                      Image placeholders
                    </label>
                    <label>
                      <input type="checkbox" id="emojiNames" />
                      Emoji names
                    </label>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
